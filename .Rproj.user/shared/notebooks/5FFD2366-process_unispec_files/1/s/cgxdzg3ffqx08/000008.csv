"0","## Find all white reference files "
"0","ref_data_all <- df %>% "
"0","  filter(str_detect(Treatment, ""REF""))%>% # extract reference data "
"0","  separate(Block, into = c(""BX1"", ""BX2"", ""BX3"", ""BX4""), sep = "","") %>% # expand string entry in ""Block"", necessary if different ref for different blocks at same site"
"0","  gather(Block, BlockString, BX1:BX4) %>% # re-condense into one column"
"0","  mutate(Block = str_squish(BlockString), BlockString=NULL) %>% # remove whitespace from Block names introduced by ""separate"" function"
"0","  filter(!is.na(Block)) %>% # remove empty rows for site w/out B3 or B4"
"0","  mutate(CorrectionFactor_REF = ChA/ChB)"
"2","Expected 4 pieces. Missing pieces filled with `NA` in 5400 rows [1801, 1802, 1803, 1804, 1805, 1806, 1807, 1808, 1809, 1810, 1811, 1812, 1813, 1814, 1815, 1816, 1817, 1818, 1819, 1820, ...]."
"0","## Plot ALL Correction Factors for quality check "
"0","cor_factor_plot_all <- ggplot(data = ref_data_all, mapping = aes(x = Wavelength, y = CorrectionFactor_REF)) +"
"0","  geom_line(aes(color=Treatment, linetype=Measurement, alpha=Block)) +"
"0","  facet_grid(Site ~ Date) + "
"0","  scale_alpha_discrete(range=c(1, 0.5)) # set transparency by block"
"2","Using alpha for a discrete variable is not advised."
"0","cor_factor_plot_all"
